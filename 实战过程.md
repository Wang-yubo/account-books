##### 01 准备工作

> MongoDB云数据库的注册 , 获取数据库接口
>
> GitHub新建代码仓
>
> 初始化项目 cnpm init
>
> 安装node包
>
> 引入express和mongoose

##### 02 测试数据库

> ```js
> mongoose.connect(
>         "mongodb+srv://wyb:wyb123..@cluster0-afwz7.mongodb.net/test?retryWrites=true&w=majority"
>     ) //* 如果成功
>     .then(() => {
>         console.log("数据库连接成功");
>     }) //* 如果失败 用catch捕获err
>     .catch((err) => {
>         console.log(err);
>     })
> ```
>
> ![image-20200317154245492](..\account books\images\image-20200317154245492.png)
>
> 最好再设置上提示的两条
>
> ```js
> mongoose.connect(
>         "mongodb+srv://wyb:wyb123..@cluster0-afwz7.mongodb.net/test?retryWrites=true&w=majority", {
>             //* 最好再设置上提示的这两条
>             useNewUrlParser: true,
>             useUnifiedTopology: true
>         }
>     ) 
> ```
>
> 设置好就不会提示你了
>
> ![image-20200317154457986](F:\前端开发\我的实战项目\account books\images\image-20200317154457986.png)
>
> 为了明确功能 , 方便维护 , 这里把数据库的接口分离出去 , 方便后期在配置中更改数据库接口
>
> 新建config文件夹 , 在该文件夹下新建keys.js , 把该模块暴露出去
>
> ```js
> module.exports = {
>     mongoURL: "mongodb+srv://wyb:wyb123..@cluster0-afwz7.mongodb.net/test?retryWrites=true&w=majority"
> }
> ```
>
> 然后在入口文件中引入该变量
>
> ```js
> const db = require("./config/keys").mongoURL
> ```
>
> 替换原来的变量
>
> ```js
> mongoose.connect(db, {
>         //* 最好再设置上提示的这两条
>         useNewUrlParser: true,
>         useUnifiedTopology: true
>     })
> ```
>
> 
>
> 使用users模块测试一下数据
>
> ![image-20200317161914786](..\account books\images\image-20200317161914786.png)
>
> ```js
> //* => users.js
> 
> //* 引入express框架
> const express = require("express");
> //* 实例化一个express
> const app = express();
> //* 实例化一个路由
> const router = express.Router();
> //* 配置路由
> router.get("/", (req, res) => {
>     res.json({
>         msg: "这个是测试数据"
>     })
> })
> 
> //* 暴露路由
> module.exports = router;
> ```
>
> 查看效果 >>>
>
> ![image-20200317162039723](..\account books\images\image-20200317162039723.png)
>
> postman测试也成功
>
> ![image-20200317163039598](..\account books\images\image-20200317163039598.png)

